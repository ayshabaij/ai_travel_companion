<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, width=device-width">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" />
  <style type="text/css">
    .wheel-chair-wrapper {
      border-radius: 100px;
      border: 2px solid #dee0e7;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      margin: 5px; /* Adjust margin to control spacing */
      cursor: pointer;
      transition: background-color 0.3s, border-color 0.3s;
      font-size: 14px; /* Adjust font size if needed */
      box-sizing: border-box; /* Ensure proper sizing */
      text-align: center; /* Center text */
    }
    .wheel-chair-wrapper.selected {
      background-color: #ea5b6e;
      border-color: #ea5b6e;
      color: #fff;
    }
    .frame-parent {
      position: absolute;
      top: 232px;
      left: 45px;
      display: flex;
      flex-wrap: wrap; /* Enable wrapping for grid layout */
      align-items: flex-start;
      justify-content: flex-start;
      gap: 10px;
      width: calc(100% - 90px); /* Adjust width to fit within the container */
      max-height: 400px; /* Set a maximum height for the container */
      overflow-y: auto; /* Enable vertical scrolling */
      padding-right: 10px; /* Add some padding to the right for better appearance */
    }
    .accessbility-issue {
      position: absolute;
      top: 106px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 38.29px;
      letter-spacing: 0.04em;
      line-height: 140%;
      font-weight: 600;
      color: #010001;
      text-align: center;
      width: calc(100% - 126px); /* Adjust width to center text */
    }
    .please-choose-all {
      position: absolute;
      top: 200px; /* Adjusted top position to move it down */
      left: 50%;
      transform: translateX(-50%);
      font-size: 13.19px;
      line-height: 17.06px;
      font-weight: 500;
      color: #c6c5c7;
      text-align: center;
    }
    .continue-44-wrapper {
      position: absolute;
      top: 750px;
      left: 50%;
      transform: translateX(-50%); /* Center the button */
      border-radius: 67.18px;
      background-color: #ebecef;
      width: 312.4px;
      height: 50.4px;
      overflow: hidden;
      font-size: 18.14px;
      color: #828491;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .continue-44-wrapper.active {
      background-color: #ea5b6e;
      color: #fff;
    }
    .interests-item {
      position: absolute;
      top: 46px;
      right: 0; /* Align to the right */
      background-color: #d9d9d9;
      width: 393px;
      height: 4px;
    }
    .interests-inner {
      position: absolute;
      top: 46px;
      right: 0; /* Align to the right */
      background-color: #ea4080;
      width: 247px;
      height: 4px;
    }
    .interests {
      width: 100%;
      position: relative;
      background-color: #fff;
      height: 852px;
      text-align: left;
      font-size: 14.98px;
      color: #bfc3cf;
      font-family: Inter;
    }
  </style>
</head>
<body>
  <div class="interests">
    <%= form_with url: update_accessibility_profile_path, method: :post do %>
      <div class="frame-parent">
        <% @accessibilities.each do |accessibility| %>
          <div class="wheel-chair-wrapper" data-id="<%= accessibility.id %>">
            <%= label_tag "accessibility_ids_#{accessibility.id}", accessibility.name %>
          </div>
        <% end %>
      </div>
      <div class="accessbility-issue">Accessibility Issue</div>
      <div class="please-choose-all">Please choose all that apply.</div>
      <div class="continue-44-wrapper" id="submit-btn">
        <b class="continue-44">CONTINUE 4/4</b>
      </div>
      <div class="interests-item"></div>
      <div class="interests-inner"></div>
      <div id="selected-accessibilities"></div>
    <% end %>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const wrappers = document.querySelectorAll(".wheel-chair-wrapper");
      const submitBtn = document.getElementById("submit-btn");
      const selectedAccessibilitiesContainer = document.getElementById("selected-accessibilities");

      wrappers.forEach(wrapper => {
        wrapper.addEventListener("click", function() {
          this.classList.toggle("selected");
          const id = this.getAttribute("data-id");
          let input = document.querySelector(`input[name="accessibility_ids[]"][value="${id}"]`);

          if (this.classList.contains("selected")) {
            if (!input) {
              input = document.createElement("input");
              input.type = "hidden";
              input.name = "accessibility_ids[]";
              input.value = id;
              selectedAccessibilitiesContainer.appendChild(input);
            }
          } else {
            if (input) input.remove();
          }

          if (selectedAccessibilitiesContainer.children.length > 0) {
            submitBtn.classList.add("active");
          } else {
            submitBtn.classList.remove("active");
          }
        });
      });

      submitBtn.addEventListener("click", function(event) {
        event.preventDefault();
        const formData = new FormData(document.querySelector("form"));

        // Send the data to the other Ruby project's endpoint
        fetch('https://other-ruby-project.example.com/endpoint', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          // Handle the response if needed
          console.log('Success:', data);
          // Optionally submit the form to the current Rails app
          document.querySelector("form").submit();
        })
        .catch((error) => {
          console.error('Error:', error);
        });
      });
    });
  </script>
</body>
</html>
